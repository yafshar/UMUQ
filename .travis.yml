# Build matrix / environment variable are explained on:
# http://about.travis-ci.org/docs/user/build-configuration/
# This file can be validated on:
# http://lint.travis-ci.org/
sudo: false
language: cpp

# Define the matrix explicitly, manually expanding the combinations of (os, compiler, env).
# It is more tedious, but grants us far more flexibility.
matrix:
  include:
    - os: linux
    compiler: gcc
    sudo : true
    install: ./scripts/install-linux.sh && ./scripts/log-config.sh
    script: ./scripts/build-linux-autotools.sh
    - os: linux
    compiler: gcc
    sudo : true
    install: ./scripts/install-linux.sh && ./scripts/log-config.sh
    script: ./scripts/build-linux-autotools.sh
    
# These are the install and build (script) phases for the most common entries in the matrix.  They could be included
# in each entry in the matrix, but that is just repetitive.
install:
  - ./scripts/install-${TRAVIS_OS_NAME}.sh
  - . ./scripts/env-${TRAVIS_OS_NAME}.sh
  - ./scripts/log-config.sh
    
script: ./scripts/travis.sh

# For sudo=false builds this section installs the necessary dependencies.
addons:
  apt:
    # List of whitelisted in travis packages for ubuntu-precise can be found here:
    #   https://github.com/travis-ci/apt-package-whitelist/blob/master/ubuntu-precise
    # List of whitelisted in travis apt-sources:
    #   https://github.com/travis-ci/apt-source-whitelist/blob/master/ubuntu.json
    sources:
    - ubuntu-toolchain-r-test
    - llvm-toolchain-precise-3.7
        
packages:
  - g++-5
  - clang-3.7

notifications:
  email: false